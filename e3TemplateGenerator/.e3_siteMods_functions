#!/usr/bin/env bash
#
#  Copyright (c) 2020 -         Simon Rose
#  Copyright (c) 2018 - 2019    Jeong Han Lee
#  Copyright (c) 2018 - 2019    European Spallation Source ERIC
#
#  The program is free software: you can redistribute
#  it and/or modify it under the terms of the GNU General Public License
#  as published by the Free Software Foundation, either version 2 of the
#  License, or any newer version.
#
#  This program is distributed in the hope that it will be useful, but WITHOUT
#  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
#  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
#  more details.
#
#  You should have received a copy of the GNU General Public License along with
#  this program. If not, see https://www.gnu.org/licenses/gpl-2.0.txt
#
#
#   author  : Jeong Han Lee
#   email   : jeonghan.lee@gmail.com
#   date    : Tuesday, November 26 16:40:38 CET 2019
#   version : 1.0.3
#
#  Updated to move code snippets into template files.
#
#   updated : Simon Rose
#   email   : simon.rose@ess.eu
#   date    :
#   version : 1.1.0

function add_readme_siteMods
{
    create_file_from_template "${_TEMPLATE_DIR}/README.md" "README.md" "_E3_MOD_NAME _EPICS_MODULE_NAME"
}

function add_CONFIG_siteMods
{
    create_file_from_template "${_TEMPLATE_DIR}/CONFIG" "CONFIG" ""
}

function add_CONFIG_siteMods_local
{
    create_file_from_template "${_TEMPLATE_DIR}/CONFIG_local" "CONFIG" ""
}

function add_CONFIG_MODULE_siteMods
{
    local _INCLUDE_MODULE=""
    create_file_from_template "${_TEMPLATE_DIR}/CONFIG_MODULE" "CONFIG_MODULE" "_EPICS_MODULE_NAME _E3_MODULE_SRC_PATH _INCLUDE_MODULE"
}

function add_CONFIG_MODULE_DEV_siteMods
{
    create_file_from_template "${_TEMPLATE_DIR}/CONFIG_MODULE_DEV" "CONFIG_MODULE_DEV" "_EPICS_MODULE_NAME _E3_MODULE_SRC_PATH _E3_MODULE_GITURL_FULL"
}

function add_RULES_siteMods
{
    create_file_from_template "${_TEMPLATE_DIR}/RULES" "RULES" ""
}

function add_RULES_siteMods_local
{
    create_file_from_template "${_TEMPLATE_DIR}/RULES_local" "RULES" ""
}

function add_CONFIG_MODULE_siteMods_localexample
{
    local _INCLUDE_MODULE="SEQUENCER_DEP_VERSION:=2.2.7"
    create_file_from_template "${_TEMPLATE_DIR}/CONFIG_MODULE" "CONFIG_MODULE" "_EPICS_MODULE_NAME _E3_MODULE_SRC_PATH _INCLUDE_MODULE"
}

function add_configure_siteMods
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods            ||  die 1 "We cannot do add_CONFIG_siteMods : please check it";
    # .e3_common_functions
    add_RELEASE                    ||  die 1 "We cannot do add_RELEASE         : please check it";
    add_RELEASE_DEV                ||  die 1 "We cannot do add_RELEASE_DEV     : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods     ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods : please check it";
    add_CONFIG_MODULE_DEV_siteMods ||  die 1 "We cannot do add_CONFIG_MODULE_DEV_siteMods : please check it";
    add_RULES_siteMods             ||  die 1 "We cannot do add_RULES_siteMods : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS             ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}


function add_configure_siteMods_local
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods_local      ||  die 1 "We cannot do add_CONFIG_siteMods_local : please check it";
    # .e3_common_functions
    add_RELEASE                    ||  die 1 "We cannot do add_RELEASE         : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods     ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods : please check it";
    add_RULES_siteMods_local       ||  die 1 "We cannot do add_RULES_siteMods_local : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS             ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}



function add_configure_siteMods_localexample
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods_local      ||  die 1 "We cannot do add_CONFIG_siteMods_local : please check it";
    # .e3_common_functions
    add_RELEASE                    ||  die 1 "We cannot do add_RELEASE         : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods_localexample   ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods : please check it";
    add_RULES_siteMods_local       ||  die 1 "We cannot do add_RULES_siteMods_local : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS             ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}



function add_configure_siteMods_variables
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods            ||  die 1 "We cannot do add_CONFIG_siteMods : please check it";
    # .e3_common_functions
    add_RELEASE_variables          ||  die 1 "We cannot do add_RELEASE         : please check it";
    add_RELEASE_DEV_variables      ||  die 1 "We cannot do add_RELEASE_DEV     : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods     ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods : please check it";
    add_CONFIG_MODULE_DEV_siteMods ||  die 1 "We cannot do add_CONFIG_MODULE_DEV_siteMods : please check it";
    add_RULES_siteMods             ||  die 1 "We cannot do add_RULES_siteMods : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS             ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}





#
# We don't need the development mode, because all source files are located in *-loc path
#
function add_configure_siteMods_local_variables
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods_local     ||  die 1 "We cannot do add_CONFIG_sitMods_local : please check it";
    # .e3_common_functions
    add_RELEASE_variables         ||  die 1 "We cannot do add_RELEASE_variables : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods    ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods : please check it";
    add_RULES_siteMods_local      ||  die 1 "We cannot do add_RULES_siteMods_local : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS            ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}


#
# We don't need the development mode, because all source files are located in *-loc path
#
function add_configure_siteMods_localexample_variables
{
    # .e3_siteMods_functions
    add_CONFIG_siteMods_local     ||  die 1 "We cannot do add_CONFIG_sitMods_local : please check it";
    # .e3_common_functions
    add_RELEASE_variables         ||  die 1 "We cannot do add_RELEASE_variables : please check it";
    # .e3_siteMods_functions
    add_CONFIG_MODULE_siteMods_localexample    ||  die 1 "We cannot do add_CONFIG_MODULE_siteMods_localexample : please check it";
    add_RULES_siteMods_local      ||  die 1 "We cannot do add_RULES_siteMods_local : please check it";
    # .e3_common_functions
    add_CONFIG_OPTIONS            ||  die 1 "We cannot do add_CONFIG_OPTIONS : please check it";
}

